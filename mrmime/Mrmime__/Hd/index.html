<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Hd (mrmime.Mrmime__.Hd)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">mrmime</a> &#x00BB; <a href="../index.html">Mrmime__</a> &#x00BB; Hd</nav><h1>Module <code>Mrmime__.Hd</code></h1></header><div class="spec module" id="module-Refl"><a href="#module-Refl" class="anchor"></a><code><span class="keyword">module</span> <a href="Refl/index.html">Refl</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Value"><a href="#module-Value" class="anchor"></a><code><span class="keyword">module</span> <a href="Value/index.html">Value</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-decoder"><a href="#type-decoder" class="anchor"></a><code><span class="keyword">type</span> <span>'value decoder</span></code></dt><dt class="spec type" id="type-decode"><a href="#type-decode" class="anchor"></a><code><span class="keyword">type</span> <span>'value decode</span></code> = <code>[ </code><table class="variant"><tr id="type-decode.Field" class="anchored"><td class="def constructor"><a href="#type-decode.Field" class="anchor"></a><code>| </code><code>`Field <span class="keyword">of</span> <a href="../../Mrmime/Field_name/index.html#type-t">Mrmime.Field_name.t</a> * <span class="type-var">'value</span></code></td></tr><tr id="type-decode.Other" class="anchored"><td class="def constructor"><a href="#type-decode.Other" class="anchor"></a><code>| </code><code>`Other <span class="keyword">of</span> <a href="../../Mrmime/Field_name/index.html#type-t">Mrmime.Field_name.t</a> * string</code></td></tr><tr id="type-decode.Lines" class="anchored"><td class="def constructor"><a href="#type-decode.Lines" class="anchor"></a><code>| </code><code>`Lines <span class="keyword">of</span> <span><span>(string * <a href="../../Mrmime/Location/index.html#type-t">Mrmime.Location.t</a>)</span> list</span></code></td></tr><tr id="type-decode.Await" class="anchored"><td class="def constructor"><a href="#type-decode.Await" class="anchor"></a><code>| </code><code>`Await</code></td></tr><tr id="type-decode.End" class="anchored"><td class="def constructor"><a href="#type-decode.End" class="anchor"></a><code>| </code><code>`End <span class="keyword">of</span> string</code></td></tr><tr id="type-decode.Malformed" class="anchored"><td class="def constructor"><a href="#type-decode.Malformed" class="anchor"></a><code>| </code><code>`Malformed <span class="keyword">of</span> string</code></td></tr></table><code> ]</code></dt></dl><dl><dt class="spec value" id="val-decoder"><a href="#val-decoder" class="anchor"></a><code><span class="keyword">val</span> decoder : <span>field_name:<a href="../../Mrmime/Field_name/index.html#type-t">Mrmime.Field_name.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'value</span> <a href="Value/index.html#type-t">Value.t</a></span> <span>&#45;&gt;</span> Bigstringaf.t <span>&#45;&gt;</span> <span><span class="type-var">'value</span> <a href="index.html#type-decoder">decoder</a></span></code></dt><dd><p><code>decoder ~field_name witness queue</code> make a new header decoder which will record any <code>field_name</code> which contains a <code>'v</code> correspoding to the type witness <code>witness</code>. Length of <code>queue</code> must be a power of two.</p></dd></dl><dl><dt class="spec value" id="val-decode"><a href="#val-decode" class="anchor"></a><code><span class="keyword">val</span> decode : <span><span class="type-var">'value</span> <a href="index.html#type-decoder">decoder</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'value</span> <a href="index.html#type-decode">decode</a></span></code></dt><dd><p><code>decode decoder</code> decodes given inputs and returns:</p><ul><li><code>`Await</code> if we expect more inputs (then, a call to <a href="index.html#val-src"><code>src</code></a> is needed).</li><li><code>`End</code> when we reach end of the header (signaled by two <code>CRLF</code> tokens) with epilogue (<code>string</code> which is not a part of the header - and should be a part of the body).</li><li><code>`Lines (line, location)</code> when we can not parse inputs as a binding of a field name and a value separated by a colon.</li><li><code>`Field (field_name, value)</code> when we reach expected <code>field_name</code> (see <a href="index.html#type-decoder"><code>decoder</code></a>) with a well-formed already <i>parsed</i> value (see type witness of <a href="index.html#type-decoder"><code>decoder</code></a>).</li><li><code>`Other (field_name, value)</code> when we reach a binding of a field-name with a <i>non-parsed</i> value. <code>field_name</code> can be equal to expected field-name notified to <a href="index.html#type-decoder"><code>decoder</code></a> but we are not able to parse value correctly according to type witness expected.</li></ul></dd></dl><dl><dt class="spec value" id="val-src"><a href="#val-src" class="anchor"></a><code><span class="keyword">val</span> src : <span><span class="type-var">'value</span> <a href="index.html#type-decoder">decoder</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span>(unit, Rresult.R.msg)</span> Stdlib.result</span></code></dt><dd><p><code>src decoder v off len</code> refills <code>decoder</code> with <code>v</code> starting at <code>off</code> with <code>len</code> bytes. inputs must be smaller than the given space in <a href="index.html#type-decoder"><code>decoder</code></a>.</p></dd></dl></div></body></html>